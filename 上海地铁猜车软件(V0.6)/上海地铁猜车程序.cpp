#include "pch.h"
#include<iostream>
#include<string>
#define DEVELOP
using namespace std;
void guess(int no)
{
	if (no == 92011 || no == 92022 || no == 92033 || no == 93442 || no == 93453 || no == 94102 || no == 94113 || no == 94121)
		cout << 101 << endl;
	else if (no == 93121 || no == 93262 || no == 93273 || no == 14652 || no == 14663 || no == 92102 || no == 93233 || no == 93311)
		cout << 102 << endl;
	else if (no == 92131 || no == 92142 || no == 92153 || no == 94022 || no == 94033 || no == 92162 || no == 92173 || no == 92181)
		cout << 103 << endl;
	else if (no == 92191 || no == 92202 || no == 92213 || no == 94202 || no == 94202 || no == 92222 || no == 92233 || no == 92241)
		cout << 104 << endl;
	else if (no == 93011 || no == 93022 || no == 93033 || no == 94162 || no == 94173 || no == 93042 || no == 93053 || no == 93061)
		cout << 105 << endl;
	else if (no == 92061 || no == 92053 || no == 92042 || no == 94053 || no == 94042 || no == 94093 || no == 94082 || no == 94071)
		cout << 106 << endl;
	else if (no == 93251 || no == 93142 || no == 93153 || no == 93462 || no == 93473 || no == 93282 || no == 93173 || no == 92121)
		cout << 107 << endl;
	else if (no == 93191 || no == 93202 || no == 93213 || no == 94142 || no == 94153 || no == 93222 || no == 92113 || no == 93361)
		cout << 108 << endl;
	else if (no == 93131 || no == 93322 || no == 93333 || no == 93402 || no == 93413 || no == 93162 || no == 93293 || no == 93301)
		cout << 109 << endl;
	else if (no == 93181 || no == 93353 || no == 93342 || no == 94233 || no == 94222 || no == 92093 || no == 92082 || no == 92071)
		cout << 110 << endl;
	else if (no == 93371 || no == 14352 || no == 14363 || no == 14372 || no == 14392 || no == 14383 || no == 14403 || no == 93421)
		cout << 111 << endl;
	else if (no == 93431 || no == 14412 || no == 14423 || no == 14432 || no == 14443 || no == 14452 || no == 14463 || no == 93481)
		cout << 112 << endl;
	else if (no == 94011 || no == 14472 || no == 14483 || no == 14492 || no == 14503 || no == 14512 || no == 14523 || no == 94061)
		cout << 113 << endl;
	else if (no == 93071 || no == 93082 || no == 93093 || no == 93382 || no == 93393 || no == 93102 || no == 93113 || no == 93241)
		cout << 114 << endl;
	else if (no == 94131 || no == 14532 || no == 14543 || no == 14552 || no == 14563 || no == 14572 || no == 14583 || no == 94181)
		cout << 115 << endl;
	else if (no == 94191 || no == 14592 || no == 14603 || no == 14612 || no == 14623 || no == 14632 || no == 14643 || no == 94241)
		cout << 116 << endl;
	else if (no == 98011 || no == 98022 || no == 98033 || no == 14672 || no == 14683 || no == 98042 || no == 98053 || no == 98061)
		cout << 117 << endl;
	else if (no == 99011 || no == 99022 || no == 99033 || no == 1802 || no == 1813 || no == 99042 || no == 99053 || no == 99061)
		cout << 118 << endl;
	else if (no == 99071 || no == 99082 || no == 99093 || no == 1822 || no == 1833 || no == 99102 || no == 99113 || no == 99121)
		cout << 119 << endl;
	else if (no == 99131 || no == 99142 || no == 99153 || no == 99502 || no == 99513 || no == 99162 || no == 99173 || no == 99181)
		cout << 120 << endl;
	else if (no == 99191 || no == 99202 || no == 99213 || no == 99522 || no == 99533 || no == 99222 || no == 99233 || no == 99241)
		cout << 121 << endl;
	else if (no == 99251 || no == 99262 || no == 99273 || no == 22 || no == 33 || no == 99282 || no == 99293 || no == 99301)
		cout << 122 << endl;
	else if (no == 99311 || no == 99332 || no == 99333 || no == 42 || no == 53 || no == 99342 || no == 99353 || no == 99361)
		cout << 123 << endl;
	else if (no == 99371 || no == 99382 || no == 99393 || no == 1742 || no == 1753 || no == 99402 || no == 99413 || no == 99421)
		cout << 124 << endl;
	else if (no == 99431 || no == 99442 || no == 99453 || no == 1762 || no == 1773 || no == 99462 || no == 99473 || no == 99481)
		cout << 125 << endl;
	else if (no == 99491 || no == 13682 || no == 13673 || no == 13663 || no == 13652 || no == 13643 || no == 13632 || no == 99541)
		cout << 126 << endl;
	else if (no == 11 || no == 13802 || no == 13793 || no == 13783 || no == 13772 || no == 13763 || no == 13752 || no == 61)
		cout << 127 << endl;
	else if (no == 1731 || no == 13862 || no == 13853 || no == 13843 || no == 13832 || no == 13823 || no == 13812 || no == 1781)
		cout << 128 << endl;
	else if (no == 1791 || no == 13742 || no == 13733 || no == 13723 || no == 13712 || no == 13703 || no == 13692 || no == 1841)
		cout << 129 << endl;
	else if (no == 1251 || no == 13992 || no == 14003 || no == 14012 || no == 14023 || no == 14033 || no == 14042 || no == 1301)
		cout << 130 << endl;
	else if (no == 1311 || no == 14172 || no == 14183 || no == 14192 || no == 14203 || no == 14213 || no == 14222 || no == 1361)
		cout << 131 << endl;
	else if (no == 1371 || no == 14232 || no == 14243 || no == 14252 || no == 14263 || no == 14273 || no == 14282 || no == 1421)
		cout << 132 << endl;
	else if (no == 1431 || no == 14112 || no == 14123 || no == 14132 || no == 14143 || no == 14153 || no == 14162 || no == 1481)
		cout << 133 << endl;
	else if (no == 1491 || no == 14502 || no == 14063 || no == 14072 || no == 14083 || no == 14093 || no == 14102 || no == 1541)
		cout << 134 << endl;
	else if (no == 1551 || no == 13872 || no == 13883 || no == 13892 || no == 13903 || no == 13913 || no == 13922 || no == 1601)
		cout << 135 << endl;
	else if (no == 1611 || no == 13932 || no == 13943 || no == 13952 || no == 13963 || no == 13973 || no == 13982 || no == 1661)
		cout << 136 << endl;
	else if (no == 1671 || no == 14292 || no == 14303 || no == 14312 || no == 14323 || no == 14333 || no == 14342 || no == 1721)
		cout << 137 << endl;
	else if (no == 71 || no == 82 || no == 93 || no == 1262 || no == 1273 || no == 102 || no == 113 || no == 12l)
		cout << 201 << endl;
	else if (no == 131 || no == 142 || no == 153 || no == 1282 || no == 1293 || no == 162 || no == 173 || no == 181)
		cout << 202 << endl;
	else if (no == 191 || no == 202 || no == 213 || no == 1322 || no == 1311 || no == 222 || no == 233 || no == 241)
		cout << 203 << endl;
	else if (no == 251 || no == 262 || no == 273 || no == 1342 || no == 1353 || no == 282 || no == 293 || no == 301)
		cout << 204 << endl;
	else if (no == 311 || no == 322 || no == 333 || no == 1382 || no == 1393 || no == 342 || no == 353 || no == 361)
		cout << 205 << endl;
	else if (no == 371 || no == 382 || no == 393 || no == 1402 || no == 1413 || no == 402 || no == 413 || no == 421)
		cout << 206 << endl;
	else if (no == 431 || no == 442 || no == 453 || no == 1442 || no == 1453 || no == 462 || no == 473 || no == 481)
		cout << 207 << endl;
	else if (no == 491 || no == 502 || no == 513 || no == 1462 || no == 1473 || no == 522 || no == 533 || no == 541)
		cout << 208 << endl;
	else if (no == 551 || no == 562 || no == 573 || no == 1502 || no == 1513 || no == 582 || no == 593 || no == 601)
		cout << 209 << endl;
	else if (no == 611 || no == 622 || no == 633 || no == 1522 || no == 1533 || no == 642 || no == 653 || no == 661)
		cout << 210 << endl;
	else if (no == 671 || no == 682 || no == 693 || no == 1562 || no == 1573 || no == 702 || no == 713 || no == 721)
		cout << 211 << endl;
	else if (no == 731 || no == 742 || no == 753 || no == 1582 || no == 1593 || no == 762 || no == 773 || no == 781)
		cout << 212 << endl;
	else if (no == 1011 || no == 1022 || no == 1033 || no == 1622 || no == 1633 || no == 1042 || no == 1053 || no == 1061)
		cout << 213 << endl;
	else if (no == 1071 || no == 1082 || no == 1093 || no == 1642 || no == 1653 || no == 1102 || no == 1113 || no == 1121)
		cout << 214 << endl;
	else if (no == 1131 || no == 1142 || no == 1153 || no == 1682 || no == 1693 || no == 1162 || no == 1173 || no == 1181)
		cout << 215 << endl;
	else if (no == 1191 || no == 1202 || no == 1213 || no == 1702 || no == 1713 || no == 1222 || no == 1233 || no == 1241)
		cout << 216 << endl;
	else if (no == 23231 || no == 23142 || no == 23192 || no == 23203)
	    cout << 256 << endl;
	else if (no == 23211 || no == 23222 || no == 23232 || no == 23163 || no == 23172 || no == 23263 || no == 23272 || no == 23281)
	    cout << 257 << endl;
	else if (no >= 12351 && no <= 13621)
	{
	    int a = (no % 10000 / 10 - 234) / 8 + 39, b = no % 10000 / 10;
		if (b % 8 != 2)
			a++;
		a += 100;
		cout << a << endl;
	}
	else if (no >= 14681 && no <= 17151)
	{
	    int a = (no % 10000 / 10 - 467) / 8 + 55, b = no % 10000 / 10;
		if (b % 8 != 3)
			a++;
		a += 100;
		cout << a << endl;
	}
	else if (no >= 21291 && no <= 23121|| no >= 23291 && no <= 24241 || no >= 25531 && no <= 28001)
	{
	    int a = (no % 10000 / 10) / 8 + 16, b = no % 10000 / 10;
	    if (b % 8 != 0)
		    a++;
		if (a >= 86) 
		{
			a += 2000;
			cout << "0" << a << endl;
		}
		else
		{
			a += 200;
			cout << a << endl;
		}
    }
	else if (no >= 24251 && no <= 24881)
	{
	    int a = (no % 10000 / 10) / 4 - 37, b = no % 10000 / 10;
		if (b % 4 != 0)
			a++;
		a += 200;
		cout << a << endl;
    }
	else if (no >= 24893 && no <= 25522)
	{
	    int a = (no % 10000 / 10) / 4 - 53, b = no % 10000 / 10;
		if (b % 4 != 0)
			a++;
		a += 200;
		cout << a << endl;
    }
	else if (no >= 2011 && no <= 4421)
	{
	    string type;
		cout << "请输入列车型号或线路" << endl;
		cin >> type;
		if (type == "黄鱼" || type == "3")
		{
			int b, a = no % 1000 / 10;
			b = a;
			if (no / 1000 == 2)
			{
				a /= 6;
				if (b % 6 != 0)
					a++;
				a += 300;
				cout << a << endl;
			}
			if (no / 1000 == 3)
			{
				a /= 6;
				if (b % 6 != 0)
					a++;
				a += 305;
				cout << a << endl;
			}
			if (no / 1000 == 4)
			{
				a /= 6;
				if (b % 6 != 0)
					a++;
				a += 321;
				cout << a << endl;
			}
		}
		if (type == "番茄炒蛋" || type == "5")
		{
			int b, a = no % 1000 / 10;
			b = a;
			if (no / 1000 == 2)
			{
				a /= 4;
				if (b % 4 != 0)
					a++;
				a += 500;
				cout << a << endl;
			}
			if (no / 1000 == 3)
			{
				a /= 4;
				if (b % 4 != 0)
					a++;
				a += 501;
				cout << a << endl;
			}
			if (no / 1000 == 4)
			{
				a /= 4;
				if (b % 4 != 0)
					a++;
				a += 511;
				if (a == 514)
					a = 518;
				cout << a << endl;
			}
		}
    }
	else if (no >= 31691 && no <= 32161 || no >= 40011 && no <= 43301 || no >= 70011 && no <= 81681 || no >= 90011 && no <= 133721 || no >= 170011 && no <= 171681)
	{
	    int a = (no % 10000 / 10) / 6, b = no % 10000 / 10, c = no / 10000 * 100;
		if (b % 6 != 0)
			a++;
		a += c;
		if (a >= 437 && a <= 449)
			cout << a - 100 << "(" << a << ")" << endl;
		else cout << a << endl;
    }
	else if (no >= 50691 && no <= 52661)
	{
	    int a = (no % 10000 / 10 - 68) / 6 + 18, b = no % 10000 / 10 - 68;
		if (b % 6 != 0)
			a++;
		a += 500;
		cout << a << endl;
	}
	else if (no >= 60011 && no <= 62001)
	{
		int a = no % 10000 / 10 / 4, b = no % 10000 / 10;
		if (b % 4 != 0)
			a++;
		a += 600;
		if (a >= 604)
			a++;
		if (a >= 614)
			a++;
		if (a >= 624)
			a++;
		if (a >= 634)
			a++;
		if (a >= 644)
			a++;
		if (a >= 654)
			a++;
		cout << a << endl;
	}
	else if (no >= 81691 && no <= 84341)
	{
		int a = (no % 10000 / 10) / 7 + 4, b = no % 10000 / 10;
		if (b % 7 != 0)
			a++;
		a += 800;
		cout << a << endl;
	}
	else if (no >= 160011 && no <= 161381)
	{
	    int a = no % 10000 / 10 / 3, b = no % 10000 / 10;
		if (b % 3 != 0)
			a++;
		a += 1600;
		cout << a << endl;
    }
	else
	    cout << "无匹配" << endl;
}
void print_menu()
{
	system("cls");
	cout << "欢迎来到上海地铁猜车程序V0.6" << "\n" << "由4编小鲶鱼工作室出品" << "\n" << "请输入车体号,输入92113退出程序(也可查询92113车厢)" << endl;
    #ifdef DEVELOP
	cout << "此版本为beta版本,开发中,目前支持全部线路,欢迎反馈bug及功能建议"<<endl;
    #endif
}
int main()
{
	while(1)
	{
		int ShanghaiMetro;
		print_menu();
		cin >> ShanghaiMetro;
		if (ShanghaiMetro == 92113)
		{
			string is_exit;
			cout << "你是要查询92113车厢(输入查询),还是要退出程序(输入退出)?" << endl;
			cin >> is_exit;
			if (is_exit == "退出")
				break;
		}
		cout << "车体号:";
		guess(ShanghaiMetro);
		system("pause");
	}
	return 0;
}